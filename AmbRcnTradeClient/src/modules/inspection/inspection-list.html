<template>
  <toolbar type="menu" caption="Inspections">
    <toolbar-item icon="fas fa-plus" click.call="addInspection()"></toolbar-item>
  </toolbar>

  <div class="my-4">
    <select-input source.bind="approvalList" value.bind="selectedApproval" label="Approved status" warn-null="false"></select-input>
  </div>

  <table class="table table-sm table-bordered small">
    <thead>
      <tr>
        <th>Inspection date</th>        
        <th>Bags</th>
        <th>Stock allocations</th>
        <th>KOR</th>
        <th>Count</th>
        <th>Moisture</th>
        <th>Rejects</th>
        <th>SupplierName</th>        
        <th>Location</th>
        <th>Inspector</th>

      </tr>
    </thead>
    <tbody>
      <tr repeat.for="item of list">
        <td>
          <a class="with-decoration" route-href="inspectionEdit; params.bind:{id: encode(item.id)}"><i class="fas fa-fw fa-chevron-circle-right"></i></a>
          ${item.inspectionDate | dateFormat: "DD/MM/YYYY"}
        </td>
        <td>${item.bags}</td>
        <td>
          <div if.bind="item.stockAllocations == 0">
            Not in stock            
          </div>
          <div else>
            <a href="#" class="with-decoration" click.delegate="openStockAllocationsList(item)">${item.stockAllocations} stock allocation(s)</a>
          </div>
        </td>
        <td class.bind="item.css">${item.kor | numberFormat:"0,0.00"}</td>
        <td class.bind="item.css">${item.count | numberFormat: "0,0.00"}</td>
        <td class.bind="item.css">${item.moisture/100 | numberFormat: "0.00%"}</td>
        <td class.bind="item.css">${item.rejectsPct | numberFormat: "0.00%"}</td>
        <td>${item.supplierName}</td>
        <td>${item.location}</td>
        <td>${item.inspector}</td>
      </tr>
    </tbody>
  </table>
</template>
