<template>
  <toolbar type="menu" caption="Purchases">
    <toolbar-item icon="fas fa-plus" click.call="addPurchase()"></toolbar-item>
  </toolbar>

  <div class="my-3 w-50">
    <select-input source.bind="suppliers" value.bind="selectedSupplier" label="Filter by suppliers" warn-null="false"></select-input>
  </div>

  <div>
    <table class="table table-sm table-bordered">
      <thead>
        <tr>
          <th>PO</th>
          <th>Date</th>
          <th>Quantity</th>
          <th>Supplier</th>
          <th class="text-right">Stock in (bags)</th>
          <th class="text-right">Stock out (bags)</th>
          <th class="text-right">Stock balance (bags)</th>          
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="item of list">
          <td>
            <a route-href="purchaseEdit; params.bind:{id: encode(item.id)}" class="with-decoration">PO ${item.purchaseNumber | numberFormat: "00000"}</a>
          </td>
          <td>${item.purchaseDate | dateFormat: "DD/MM/YYYY"}</td>
          <td>${item.quantityMt | numberFormat: "0"} mt</td>
          <td>${item.supplierName}</td>
          <!-- <td>${item.currency.toUpperCase()} ${item.pricePerKg | numberFormat: "0,0.00"}</td> -->
          <td class="text-right">${item.stockIn.bags | numberFormat: "0,0"} (abt ${item.stockIn.bags/80 | numberFormat : "0,0"} mt)</td>
          <td class="text-right">${item.stockOut.bags | numberFormat: "0,0"} (abt ${item.stockOut.bags/80 | numberFormat: "0,0"} mt)</td>
          <td class="text-right">${item.stockBalance.bags | numberFormat: "0,0"} (abt ${item.stockBalance.bags/80 | numberFormat: "0,0"} mt)</td>
        </tr>
      </tbody>
    </table>
  </div>
</template>
