<template>
  <toolbar type="menu" caption="Payments">
    <toolbar-item icon="fas fa-plus" click.call="addPayment()"></toolbar-item>
  </toolbar>

  <div class="card">
    <div class="card-header">
      <h4>Payments</h4>
    </div>

    <div class="card-body">
      <div class="row my-4">
        <div class="col-4">
          <select-input source.bind="customersList | customerFilter: 'supplier'" label="Suppliers" warn-null="false"
            value.bind="selectedSupplier"></select-input>
        </div>
      </div>

      <table if.bind="list.length > 0" class="table table-sm table-bordered">
        <thead>
          <tr>
            <th>Payment No</th>
            <th>Payment date</th>
            <th>Supplier</th>
            <th>Beneficiary</th>
            <th>Value</th>
            <th>Exchange rate</th>
          </tr>
        </thead>
        <tbody>
          <tr repeat.for="item of list">
            <td>
              <a route-href="paymentEdit; params.bind:{id: encode(item.id)}">PO No ${item.paymentNo}</a>
            </td>
            <td>${item.paymentDate | dateFormat: "DD/MM/YYYY"}</td>
            <td>${item.supplierName}</td>
            <td>${item.beneficiaryName}</td>
            <td>${${item.currency.toUpperCase()} ${item.value | numberFormat: "0,0"}</td>
          </tr>
        </tbody>
      </table>      
    </div>
    <div class="card-footer card-footer-info">
      <div if.bind="list.length == 0">There are no payments for ${selectedSupplier.name}</div>
    </div>
  </div>
</template>
